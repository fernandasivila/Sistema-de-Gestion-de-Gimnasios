<div class="row text-center">
    <h1 class="fs-2">{{ action }} Ejercicio</h1>
    <!-- Para probar -->
    <p>ejercicio: {{ exerciseForm.value | json }}</p>
</div>

<div class="row justify-content-center">
    <div class="object-form">
        <form [formGroup]="exerciseForm" class="row g-3" (ngSubmit)="onSubmit()">
            <div class="col-md-6">
                <label for="inputName" class="form-label">Nombre</label>
                <input id="inputName" type="text" [class.is-invalid]="name?.invalid && (name?.dirty || name?.touched)" class="form-control" formControlName="name">
                <div *ngIf="validateNameRequired()" class="invalid-feedback">
                    El campo no puede estar vacío.
                </div>
            </div>

            <div class="col-md-6">
                <label for="inputAccessory" class="form-label">Accesorio</label>
                <input id="inputAccessory" type="text" [class.is-invalid]="accessory?.invalid && (accessory?.dirty || accessory?.touched)" class="form-control" formControlName="accessory">
            </div>

            <div class="col-md-12">
                <label for="inputInstruction" class="form-label">Instrucción</label>
                <textarea id="inputInstruction" [class.is-invalid]="instruction?.invalid && (instruction?.dirty || instruction?.touched)" class="form-control" rows="3" formControlName="instruction" required></textarea>
                <div *ngIf="validateInstructionRequired()" class="invalid-feedback">
                    El campo no puede estar vacío.
                </div>
            </div>

            <div class="col-md-6">
                <label for="inputDifficult" class="form-label">Dificultad</label>
                <select id="inputDifficult" [class.is-invalid]="difficult?.invalid && (difficult?.dirty || difficult?.touched)" class="form-control" formControlName="difficult" required>
                    <option value="">Seleccionar...</option>
                    <option value="Principiante">Principiante</option>
                    <option value="Intermedio">Intermedio</option>
                    <option value="Avanzado">Avanzado</option>
                </select>
                <div *ngIf="validateDifficultRequired()" class="invalid-feedback">
                    El campo no puede estar vacío.
                </div>
            </div>

            <div class="col-md-6">
                <label for="inputType" class="form-label">Tipo</label>
                <select id="inputType" [class.is-invalid]="type?.invalid && (type?.dirty || type?.touched)" class="form-control" formControlName="type" required>
                    <option value="">Seleccionar...</option>
                    <option value="Cardio">Cardio</option>
                    <option value="Musculación">Musculación</option>
                </select>
                <div *ngIf="validateTypeRequired()" class="invalid-feedback">
                    El campo no puede estar vacío.
                </div>
            </div>

            <div class="col-md-12">
                <label for="inputImages" class="form-label">Imágenes</label>
                <input id="inputImages" type="file" class="form-control" (change)="onFileChange($event)" multiple>
                <div *ngIf="imageBase64s.length > 0" class="row row-cols-4 mt-2 g-2">
                    <div *ngFor="let img of imageBase64s">
                        <img [src]="img" alt="Imagen seleccionada" class="img-thumbnail" style="max-height: 200px;">
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <label for="inputMuscleGroup" class="form-label">Grupo Muscular</label>
                <select id="inputMuscleGroup" [class.is-invalid]="muscleGroup?.invalid && (muscleGroup?.dirty || muscleGroup?.touched)" class="form-control" formControlName="muscleGroup" required>
                    <option value="">Seleccionar...</option>
                    <!-- Suponiendo que muscleGroups es un array con los grupos musculares -->
                    <option *ngFor="let group of muscleGroups" [value]="group._id">{{ group.name }}</option>
                </select>
                <div *ngIf="validateMuscleGroupRequired()" class="invalid-feedback">
                    El campo no puede estar vacío.
                </div>
            </div>

            <div class="col-12 d-flex justify-content-end">
                <button type="submit" class="btn btn-primary" [disabled]="exerciseForm.invalid">{{ action }}</button>
            </div>
        </form>
    </div>
</div>
